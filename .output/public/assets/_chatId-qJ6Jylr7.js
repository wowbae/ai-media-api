import{c as F,r as t,e as ce,j as e,f as Se,d as G,g as de,h as Ve,i as ve,k as je,R as Te,l as Ue,m as Je,n as Ce}from"./main-BXg754Zs.js";import{g as A,a as z,c as Z,B as k,T as ee,f as De,D as ue,b as pe,d as Ne,X as se,S as Q,e as ie,h as Pe,i as ge,j as Me,k as Le,l as te,P as be,M as Fe,m as le,n as q,o as oe,p as re,u as $e,C as Y,q as Ae,r as ze}from"./chat-input-B2oMt7Bv.js";import{I as he,V as _}from"./video--OK4ZQra.js";const Re=[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]],Ie=F("audio-lines",Re);const Oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ke=F("circle-alert",Oe);const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ge=F("circle-check",_e);const Be=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],He=F("copy",Be);const We=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],X=F("download",We);const Ke=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Qe=F("file",Ke);const Xe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],fe=F("maximize-2",Xe);const Ze=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],we=F("pin",Ze);const Ye=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ae=F("refresh-ccw",Ye);async function qe(s){return new Promise(a=>{const i=document.createElement("video");i.crossOrigin="anonymous",i.muted=!0,i.preload="metadata";const n=setTimeout(()=>{N(),a(null)},1e4);function N(){clearTimeout(n),i.removeEventListener("loadeddata",v),i.removeEventListener("error",b),i.src="",i.load()}function b(){console.warn("[VideoThumbnail] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ:",s),N(),a(null)}function v(){i.currentTime=.1}i.addEventListener("error",b),i.addEventListener("loadeddata",v),i.addEventListener("seeked",()=>{try{const u=document.createElement("canvas"),l=400,w=Math.min(l/i.videoWidth,l/i.videoHeight,1);u.width=i.videoWidth*w,u.height=i.videoHeight*w;const f=u.getContext("2d");if(!f){N(),a(null);return}f.drawImage(i,0,0,u.width,u.height);const g=u.toDataURL("image/jpeg",.8);N(),a(g)}catch(u){console.warn("[VideoThumbnail] –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–∞–¥—Ä–∞:",u),N(),a(null)}}),i.src=s})}const xe=new Set;function es(s){return xe.has(s)}function ss(s){xe.add(s)}function is(s){xe.delete(s)}const Ee="video-cache-v1";async function as(s,a){if(!("caches"in window)){console.warn("[VideoCache] Cache API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");return}try{const i=await caches.open(Ee),n=await fetch(s);n.ok?(await i.put(`video-${a}`,n.clone()),console.log(`[VideoCache] ‚úÖ –í–∏–¥–µ–æ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–æ: fileId=${a}`)):console.warn(`[VideoCache] ‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è: ${n.status}`)}catch(i){console.warn("[VideoCache] ‚ùå –û—à–∏–±–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ:",i)}}async function ts(s){if(!("caches"in window))return null;try{const i=await(await caches.open(Ee)).match(`video-${s}`);return i&&console.log(`[VideoCache] ‚úÖ –í–∏–¥–µ–æ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–µ—à–µ: fileId=${s}`),i||null}catch(a){return console.warn("[VideoCache] ‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ –∫–µ—à–∞:",a),null}}function ye({file:s,showDelete:a=!1,className:i,onAttach:n}){const[N,b]=t.useState(!1),[v,{isLoading:u}]=ce(),l=A(s),w=[s.previewPath?z(s.previewPath):null,s.path?z(s.path):null,s.previewUrl,s.url].filter(D=>D!=null).filter((D,y,J)=>J.indexOf(D)===y),f=w[0]||null;async function g(){try{await v(s.id).unwrap()}catch(D){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:",D)}}function c(){const D=A(s);D?ie(D,s.filename):console.warn("[MediaPreview] –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª: –Ω–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL",s)}return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:Z("group relative overflow-hidden rounded-xl border border-border bg-secondary",i),children:[s.type==="IMAGE"&&e.jsxDEV(os,{src:f||"",fallbackUrls:w.slice(1),alt:s.filename,onClick:()=>b(!0)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:96,columnNumber:11},this),s.type==="VIDEO"&&e.jsxDEV(rs,{fileId:s.id,previewUrl:s.previewPath||s.previewUrl||null,originalUrl:l||"",filename:s.filename},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:105,columnNumber:11},this),s.type==="AUDIO"&&e.jsxDEV(ms,{originalUrl:l||"",filename:s.filename},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:114,columnNumber:11},this),s.type!=="VIDEO"&&s.type!=="AUDIO"&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center gap-2 bg-black/50 opacity-0 transition-opacity group-hover:opacity-100",children:[s.type==="IMAGE"&&e.jsxDEV(k,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:()=>b(!0),children:e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:127,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:121,columnNumber:15},this),e.jsxDEV(k,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:c,children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:137,columnNumber:15},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:131,columnNumber:13},this),a&&e.jsxDEV(k,{size:"icon",variant:"destructive",className:"h-8 w-8",onClick:g,disabled:u,children:e.jsxDEV(ee,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:148,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:141,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:119,columnNumber:11},this),s.type==="VIDEO"&&a&&e.jsxDEV("div",{className:"absolute right-2 top-2 z-10",children:e.jsxDEV(k,{size:"icon",variant:"destructive",className:"h-8 w-8 bg-black/70 hover:bg-red-600/80",onClick:g,disabled:u,children:e.jsxDEV(ee,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:164,columnNumber:15},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:157,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:156,columnNumber:11},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-linear-to-t from-black/80 to-transparent p-2",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV(ns,{type:s.type},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:172,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:De(s.size||0)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:173,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:171,columnNumber:11},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:170,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:88,columnNumber:7},this),s.type==="IMAGE"&&e.jsxDEV(ue,{open:N,onOpenChange:b,children:e.jsxDEV(pe,{showCloseButton:!1,className:"max-h-[95vh] max-w-[95vw] overflow-hidden border-border bg-background p-0",children:[e.jsxDEV(Ne,{className:"sr-only",children:["–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ",s.filename]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:187,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:l||s.url||"",alt:s.filename,className:"max-h-[90vh] w-full object-contain"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:191,columnNumber:15},this),e.jsxDEV("div",{className:"absolute right-2 top-2 flex gap-2",children:[e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:c,children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:202,columnNumber:19},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:197,columnNumber:17},this),e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:()=>b(!1),children:e.jsxDEV(se,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:209,columnNumber:19},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:196,columnNumber:15},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-linear-to-t from-black/80 to-transparent p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between text-white",children:[e.jsxDEV("span",{className:"font-medium text-foreground",children:s.filename},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:214,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:ls(s.width,s.height)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:215,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:213,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:212,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:190,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:182,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:87,columnNumber:5},this)}function os({src:s,fallbackUrls:a=[],alt:i,onClick:n}){const[N,b]=t.useState(!1),[v,u]=t.useState(!1),[l,w]=t.useState(0),[f,g]=t.useState(s);function c(){if(console.warn("[ImagePreview] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",{currentSrc:f,currentUrlIndex:l,fallbackUrls:a,alt:i}),l<a.length){const D=l+1;w(D);const y=a[l];console.log("[ImagePreview] –ü—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π URL:",y),g(y),b(!1),u(!1)}else console.error("[ImagePreview] –í—Å–µ URL –∏—Å—á–µ—Ä–ø–∞–Ω—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∫–æ–Ω–∫—É —Ñ–∞–π–ª–∞"),u(!0)}return t.useEffect(()=>{g(s),w(0),b(!1),u(!1)},[s]),t.useEffect(()=>{b(!1),u(!1)},[f]),e.jsxDEV("div",{className:"relative aspect-square cursor-pointer overflow-hidden",onClick:n,children:[!N&&!v&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-secondary",children:e.jsxDEV(he,{className:"h-8 w-8 animate-pulse text-muted-foreground/50"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:286,columnNumber:11},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:285,columnNumber:9},this),v?e.jsxDEV("div",{className:"flex h-full items-center justify-center bg-secondary",children:e.jsxDEV(Qe,{className:"h-8 w-8 text-muted-foreground/50"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:291,columnNumber:11},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:290,columnNumber:9},this):e.jsxDEV("img",{src:f,alt:i,loading:"lazy",className:Z("h-full w-full object-cover transition-opacity",N?"opacity-100":"opacity-0"),onLoad:()=>b(!0),onError:c},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:294,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:280,columnNumber:5},this)}function rs({fileId:s,previewUrl:a,originalUrl:i,filename:n}){const[N,b]=t.useState(!1),[v,u]=t.useState(!1),[l,w]=t.useState(!1),[f,g]=t.useState(!1),[c,D]=t.useState(null),y=t.useRef(!1),[J,C]=t.useState(null),[M,h]=t.useState(!1),[P]=Se(),V=(a?.startsWith("__pending__")??!1)&&a?a.replace("__pending__",""):a;t.useEffect(()=>{if(a||f||y.current||es(s)||!i)return;async function E(){y.current=!0,ss(s),g(!0);try{const U=await qe(i);U&&(D(U),P({fileId:s,thumbnail:U}).catch(S=>{console.warn("[VideoPreview] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ thumbnail –Ω–∞ —Å–µ—Ä–≤–µ—Ä:",S)}))}catch(U){console.warn("[VideoPreview] –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ thumbnail:",U)}finally{g(!1),is(s)}}E()},[s,a,i,f,P]),t.useEffect(()=>{if(!N||!i)return;let E=null;async function U(){h(!0);try{const S=await ts(s);if(S){const $=await S.blob();E=URL.createObjectURL($),C(E),h(!1);return}const L=await fetch(i);if(!L.ok)throw new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ: ${L.status}`);const B=await L.blob();E=URL.createObjectURL(B),C(E),await as(i,s),h(!1)}catch(S){console.error("[VideoPreview] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ:",S),h(!1),C(i)}}return U(),()=>{E&&URL.revokeObjectURL(E)}},[N,i,s]);function r(){b(!0)}const p=V?V.startsWith("data:")||V.startsWith("http://")||V.startsWith("https://")?V:z(V):c;if(N){const E=J||i;return e.jsxDEV("div",{className:"group/video relative aspect-square",children:[M&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-secondary z-10",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[e.jsxDEV(_,{className:"h-8 w-8 animate-pulse text-muted-foreground/50"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:473,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ..."},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:474,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:472,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:471,columnNumber:11},this),e.jsxDEV("video",{src:E,poster:p||void 0,controls:!0,className:"h-full w-full object-cover video-controls-on-hover"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:478,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:469,columnNumber:7},this)}return f&&!c?e.jsxDEV("div",{className:"relative aspect-square cursor-pointer overflow-hidden",onClick:r,children:[e.jsxDEV(Q,{className:"h-full w-full rounded-none"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:495,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxDEV("div",{className:"rounded-full bg-white/20 p-4 backdrop-blur-sm animate-pulse",children:e.jsxDEV(_,{className:"h-8 w-8 text-white"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:498,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:497,columnNumber:11},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:496,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:491,columnNumber:7},this):!p||l?e.jsxDEV("div",{className:"relative aspect-square cursor-pointer overflow-hidden bg-secondary",onClick:r,children:e.jsxDEV("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3",children:[e.jsxDEV("div",{className:"rounded-full bg-white/20 p-6 backdrop-blur-sm",children:e.jsxDEV(_,{className:"h-12 w-12 text-white"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:514,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:513,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:516,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:512,columnNumber:9},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:508,columnNumber:7},this):e.jsxDEV("div",{className:"relative aspect-square cursor-pointer overflow-hidden",onClick:r,children:[e.jsxDEV("img",{src:p,alt:n,loading:"lazy",className:Z("h-full w-full object-cover transition-opacity",v?"opacity-100":"opacity-0"),onLoad:()=>u(!0),onError:E=>{console.warn("[VideoPreview] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–≤—å—é:",{fileId:s,filename:n,displayPreviewUrl:p,error:E}),w(!0)}},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:528,columnNumber:7},this),!v&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-secondary",children:e.jsxDEV(_,{className:"h-8 w-8 animate-pulse text-muted-foreground/50"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:549,columnNumber:11},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:548,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-0 bg-black/0 transition-colors hover:bg-black/10"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:553,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:524,columnNumber:5},this)}function ms({originalUrl:s,filename:a}){return e.jsxDEV("div",{className:"flex aspect-video flex-col items-center justify-center gap-3 bg-secondary p-4",children:[e.jsxDEV(Ie,{className:"h-12 w-12 text-primary"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:568,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground text-center max-w-full truncate",children:a},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:569,columnNumber:7},this),e.jsxDEV("audio",{src:s,controls:!0,className:"w-full"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:572,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:567,columnNumber:5},this)}function ns({type:s}){const a={IMAGE:{icon:he},VIDEO:{icon:_},AUDIO:{icon:Ie}},{icon:i}=a[s];return e.jsxDEV(i,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-preview.tsx",lineNumber:595,columnNumber:10},this)}function ls(s,a){return s&&a?`${s} √ó ${a}`:""}function cs({status:s}){const a={PENDING:{icon:G,label:"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞",className:"bg-blue-900/30 text-blue-400"},PROCESSING:{icon:G,label:"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è",className:"bg-blue-900/30 text-blue-400"},COMPLETED:{icon:Ge,label:"–ì–æ—Ç–æ–≤–æ",className:"bg-green-900/30 text-green-400"},FAILED:{icon:ke,label:"–û—à–∏–±–∫–∞",className:"bg-red-900/30 text-red-400"}},{icon:i,label:n,className:N}=a[s],b=s==="PROCESSING"||s==="PENDING";return e.jsxDEV(Pe,{variant:"secondary",className:N,children:[e.jsxDEV(i,{className:`mr-1 h-3 w-3 ${b?"animate-spin":""}`},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/status-badge.tsx",lineNumber:39,columnNumber:13},this),n]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/status-badge.tsx",lineNumber:38,columnNumber:9},this)}function ds({request:s,onEditPrompt:a,onAttachFile:i,onRepeatRequest:n}){const[N,{isLoading:b}]=ce(),{data:v}=de(),[u,l]=t.useState(null),[w,f]=t.useState(!1),[g,c]=t.useState(!1),[D,y]=t.useState(!1),J=t.useRef(null),C=t.useMemo(()=>ge(f),[]);t.useEffect(()=>{if(J.current){const{scrollHeight:r,clientHeight:p}=J.current;y(r>p)}},[s.prompt]);function M(r){return r?v?.find(p=>p.key===r):null}const h=M(s.model),P=h?.provider?Me(h.provider):null;async function T(r,p){r.stopPropagation();try{await N(p).unwrap()}catch(E){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞:",E)}}function V(){return s.status==="FAILED"?"bg-destructive/10 border border-destructive/20":"bg-secondary/40 border border-border/50"}return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"group flex items-start justify-end gap-2",children:[e.jsxDEV("div",{className:"flex flex-col gap-1",children:[a&&e.jsxDEV(k,{type:"button",size:"icon",variant:"ghost",className:"h-8 w-8 shrink-0 text-primary opacity-0 transition-opacity hover:text-primary/80 hover:bg-primary/20 group-hover:opacity-100",onClick:()=>a(s.prompt),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç",children:e.jsxDEV(He,{className:"text-muted-foreground"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:117,columnNumber:29},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:109,columnNumber:25},this),n&&e.jsxDEV(k,{type:"button",size:"icon",variant:"ghost",className:"h-8 w-8 shrink-0 text-muted-foreground opacity-0 transition-opacity hover:text-primary hover:bg-primary/20 focus:text-primary focus:bg-primary/20 group-hover:opacity-100",onClick:()=>n(s),title:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –Ω–µ–π—Ä–æ–Ω–∫–µ",children:e.jsxDEV(ae,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:131,columnNumber:29},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:123,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:106,columnNumber:17},this),e.jsxDEV("div",{className:"max-w-[80%] rounded-2xl rounded-tr-sm bg-primary px-4 py-3 shadow-sm",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("p",{ref:J,className:`whitespace-pre-wrap text-sm text-primary-foreground transition-all duration-200 ${g?"":"line-clamp-2"}`,children:s.prompt},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:137,columnNumber:25},this),D&&e.jsxDEV("button",{onClick:()=>c(!g),className:"mt-1 text-xs font-medium text-primary-foreground/80 hover:text-primary-foreground transition-colors",children:g?"–°–≤–µ—Ä–Ω—É—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:146,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:136,columnNumber:21},this),(s.inputFiles&&s.inputFiles.length>0||s.files&&s.files.length>0&&(!s.inputFiles||s.inputFiles.length===0))&&e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-2",children:[s.inputFiles?.map((r,p)=>{if(!r)return null;const E=r.startsWith("data:"),U=r.startsWith("http://")||r.startsWith("https://");let S=r;if(!E&&!U&&r)S=z(r);else if(!E&&!U)return null;const L=E?Le(r):r.match(/\.(mp4|webm|mov)$/i)!==null;return e.jsxDEV("div",{className:"h-16 w-16 overflow-hidden rounded-lg border border-primary-foreground/20",children:L?e.jsxDEV("video",{src:S,className:"h-full w-full object-cover"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:195,columnNumber:45},this):e.jsxDEV("img",{src:S,alt:`–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª ${p+1}`,className:"h-full w-full object-cover",crossOrigin:"anonymous"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:201,columnNumber:45},this)},p,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:190,columnNumber:37},this)}),(!s.inputFiles||s.inputFiles.length===0)&&s.files.map(r=>{const p=r.url||(r.path?z(r.path):null);if(!p)return null;const E=r.type==="VIDEO";return e.jsxDEV("div",{className:"h-16 w-16 overflow-hidden rounded-lg border border-primary-foreground/20",children:E?e.jsxDEV("video",{src:p,className:"h-full w-full object-cover"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:226,columnNumber:49},this):e.jsxDEV("img",{src:p,alt:r.filename,className:"h-full w-full object-cover",crossOrigin:"anonymous"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:232,columnNumber:49},this)},r.id,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:221,columnNumber:41},this)})]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:157,columnNumber:25},this),e.jsxDEV("div",{className:"mt-1 flex items-center justify-end gap-2 text-xs text-primary-foreground/70",children:[h&&e.jsxDEV("span",{className:"flex items-center gap-1",children:[h.name,P&&e.jsxDEV("span",{className:"text-primary-foreground/50",children:["‚Ä¢ ",P]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:249,columnNumber:37},this),s.seed&&e.jsxDEV("span",{className:"text-primary-foreground/50",children:["‚Ä¢ Seed: ",s.seed]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:254,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:246,columnNumber:29},this),e.jsxDEV("span",{children:te(s.createdAt)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:260,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:244,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:135,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:104,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-start",children:e.jsxDEV("div",{className:"max-w-[80%] space-y-3",children:[(s.status!=="COMPLETED"||s.status==="COMPLETED"&&s.files.length===0)&&e.jsxDEV("div",{className:`rounded-2xl rounded-tl-sm px-4 py-3 ${V()}`,children:[e.jsxDEV(cs,{status:s.status},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:276,columnNumber:29},this),s.status==="FAILED"&&s.errorMessage&&e.jsxDEV("div",{className:"mt-2 flex items-start gap-2 rounded-lg bg-destructive/10 p-3 text-destructive",children:[e.jsxDEV(ke,{className:"mt-0.5 h-4 w-4 shrink-0"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:282,columnNumber:41},this),e.jsxDEV("p",{className:"min-w-0 flex-1 text-xs whitespace-pre-wrap break-all overflow-x-auto",children:s.errorMessage},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:283,columnNumber:41},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:281,columnNumber:37},this),(s.status==="PENDING"||s.status==="PROCESSING")&&e.jsxDEV("div",{className:"mt-3 space-y-3",children:e.jsxDEV(Q,{className:"aspect-square w-48 rounded-xl"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:294,columnNumber:37},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:292,columnNumber:33},this),s.status==="COMPLETED"&&s.files.length===0&&e.jsxDEV("div",{className:"mt-2 rounded-lg bg-primary/10 p-3 text-primary",children:e.jsxDEV("p",{className:"text-sm",children:"‚ö†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω–æ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:302,columnNumber:41},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:301,columnNumber:37},this),s.completedAt&&e.jsxDEV("p",{className:"mt-2 text-xs text-slate-500",children:["–ó–∞–≤–µ—Ä—à–µ–Ω–æ: ",te(s.completedAt)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:311,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:272,columnNumber:25},this),s.status==="COMPLETED"&&s.files.length>0&&e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:s.files.map(r=>e.jsxDEV("div",{className:"group flex items-start gap-2",children:[e.jsxDEV("div",{className:`inline-block w-fit rounded-2xl rounded-tl-sm p-2 ${V()}`,children:e.jsxDEV(ye,{file:r,onAttach:i},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:332,columnNumber:53},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:329,columnNumber:49},this),e.jsxDEV("div",{className:"mt-1 flex flex-col gap-1",children:[r.type==="IMAGE"&&i&&e.jsxDEV(k,{type:"button",size:"icon",variant:"ghost",className:"h-8 w-8 shrink-0 text-muted-foreground opacity-0 transition-opacity hover:text-primary hover:bg-primary/10 group-hover:opacity-100",onClick:()=>{const p=r.path?z(r.path):r.url;if(!p){console.warn("[MessageItem] –ù–µ—Ç file.path –∏ file.url"),alert("–û—à–∏–±–∫–∞: —É —Ñ–∞–π–ª–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—É—Ç—å –∏–ª–∏ URL. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª.");return}C(),i(p,r.filename,r.url||void 0)},title:"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –ø—Ä–æ–º–ø—Ç—É",children:w?e.jsxDEV(G,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:375,columnNumber:69},this):e.jsxDEV(be,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:377,columnNumber:69},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:342,columnNumber:61},this),e.jsxDEV(k,{type:"button",size:"icon",variant:"ghost",className:"h-8 w-8 shrink-0 text-slate-400 opacity-0 transition-opacity hover:text-red-400 hover:bg-red-600/20 group-hover:opacity-100",onClick:p=>T(p,r.id),disabled:b,title:"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª",children:e.jsxDEV(ee,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:396,columnNumber:57},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:382,columnNumber:53},this),r.type==="VIDEO"&&e.jsxDEV(k,{type:"button",size:"icon",variant:"ghost",className:"h-8 w-8 shrink-0 text-muted-foreground opacity-0 transition-opacity hover:text-primary hover:bg-primary/10 group-hover:opacity-100",onClick:()=>l(r),title:"–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω",children:e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:412,columnNumber:61},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:400,columnNumber:57},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:338,columnNumber:49},this)]},r.id,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:325,columnNumber:45},this))},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:322,columnNumber:33},this),s.completedAt&&e.jsxDEV("p",{className:"text-xs text-slate-500",children:["–ó–∞–≤–µ—Ä—à–µ–Ω–æ:"," ",te(s.completedAt)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:422,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:321,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:267,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:266,columnNumber:13},this),u&&e.jsxDEV(ue,{open:!!u,onOpenChange:r=>!r&&l(null),children:e.jsxDEV(pe,{showCloseButton:!1,className:"max-h-[95vh] max-w-[95vw] overflow-hidden border-border bg-background p-0",children:[e.jsxDEV(Ne,{className:"sr-only",children:["–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ: ",u.filename]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:442,columnNumber:25},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("video",{src:A(u)||"",controls:!0,autoPlay:!0,className:"max-h-[90vh] w-full"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:446,columnNumber:29},this),e.jsxDEV("div",{className:"absolute right-2 top-2 flex gap-2",children:[e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:()=>{const r=A(u);if(!r){console.warn("[MessageItem] –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª: –Ω–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL",u);return}ie(r,u.filename)},title:"–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª",children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:466,columnNumber:37},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:453,columnNumber:33},this),e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:()=>l(null),children:e.jsxDEV(se,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:473,columnNumber:37},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:468,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:452,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:445,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:438,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:434,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-item.tsx",lineNumber:102,columnNumber:9},this)}function me(){return e.jsxDEV("div",{className:"mb-6 space-y-3",children:[e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(Q,{className:"h-16 w-64 rounded-2xl"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-skeleton.tsx",lineNumber:8,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-skeleton.tsx",lineNumber:7,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-start",children:e.jsxDEV(Q,{className:"h-48 w-80 rounded-2xl"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-skeleton.tsx",lineNumber:11,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-skeleton.tsx",lineNumber:10,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-skeleton.tsx",lineNumber:6,columnNumber:9},this)}function us({requests:s,chatModel:a,isLoading:i,onEditPrompt:n,onAttachFile:N,onRepeatRequest:b,onScrollStateChange:v,onScrollToBottomRef:u}){const l=t.useRef(null),w=t.useRef(null),[f,g]=t.useState(0),c=t.useMemo(()=>s.map(h=>`${h.id}-${h.status}`).join("|"),[s]),[D,y]=t.useState(!1);t.useEffect(()=>{v?.(D)},[D,v]);const J=t.useCallback(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth"})},[]);t.useEffect(()=>{u?.(J)},[J,u]),t.useEffect(()=>{const h=document.getElementById("chat-input");if(!h)return;const P=()=>{const V=h.offsetHeight;g(V)};P();const T=new ResizeObserver(()=>{P()});return T.observe(h),()=>{T.disconnect()}},[]);const C=t.useCallback(()=>{if(l.current){const{scrollTop:h,scrollHeight:P,clientHeight:T}=l.current,V=P-h-T<200;y(!V)}},[]);if(t.useEffect(()=>{const h=l.current;if(h)return h.addEventListener("scroll",C),()=>h.removeEventListener("scroll",C)},[C]),t.useEffect(()=>{const h=setTimeout(()=>{w.current?.scrollIntoView({behavior:"smooth"})},0);return()=>clearTimeout(h)},[s.length,c]),i)return e.jsxDEV("div",{className:"flex-1 p-4",children:[e.jsxDEV(me,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:119,columnNumber:17},this),e.jsxDEV(me,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV(me,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:118,columnNumber:13},this);if(s.length===0)return e.jsxDEV("div",{className:"flex flex-1 flex-col items-center justify-center p-8 text-center",children:[e.jsxDEV("div",{className:"mb-4 rounded-full bg-secondary p-6",children:e.jsxDEV("span",{className:"text-4xl",children:"üé®"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:130,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:129,columnNumber:17},this),e.jsxDEV("h3",{className:"mb-2 text-xl font-semibold text-white",children:"–ù–∞—á–Ω–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV("p",{className:"max-w-md text-slate-400",children:"–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –∏ –Ω–∞–∂–º–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –≤–∏–¥–µ–æ –∏–ª–∏ –∞—É–¥–∏–æ —Å –ø–æ–º–æ—â—å—é AI"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:135,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(Fe,{model:a},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:140,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:139,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:128,columnNumber:13},this);const M=f>0?f+24+16:300;return e.jsxDEV("div",{className:"relative flex-1 overflow-hidden min-h-0 mx-0",children:e.jsxDEV(le,{className:"h-full bg-background",ref:l,children:e.jsxDEV("div",{className:"space-y-6 p-4",style:{paddingBottom:`${M}px`},children:[s.map(h=>e.jsxDEV(ds,{request:h,onEditPrompt:n,onAttachFile:N,onRepeatRequest:b},h.id,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:160,columnNumber:25},this)),e.jsxDEV("div",{ref:w},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:169,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:155,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:154,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/message-list.tsx",lineNumber:153,columnNumber:9},this)}function ps({file:s,onClose:a,onAttachFile:i,onRepeatRequest:n,isPinned:N=!1,onTogglePin:b}){const v=A(s);if(!v)return null;t.useEffect(()=>{function l(w){w.key==="Escape"&&a()}return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[a]);function u(){const l=A(s);if(!l){console.warn("[MediaFullscreenView] –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª: –Ω–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL",s);return}ie(l,s.filename)}return e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:a,children:e.jsxDEV("div",{className:"relative max-h-[95vh] max-w-[95vw]",onClick:l=>l.stopPropagation(),children:[s.type==="IMAGE"&&e.jsxDEV("img",{src:v,alt:s.filename,className:"max-h-[90vh] max-w-[90vw] object-contain rounded-lg shadow-2xl"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:64,columnNumber:21},this),s.type==="VIDEO"&&s.path&&e.jsxDEV("div",{className:"relative rounded-lg overflow-hidden shadow-2xl",children:e.jsxDEV("video",{src:v,controls:!0,autoPlay:!0,className:"max-h-[90vh] w-full"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:73,columnNumber:25},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:72,columnNumber:21},this),s.type==="AUDIO"&&e.jsxDEV("div",{className:"flex flex-col items-center gap-4 rounded-xl bg-secondary p-8 shadow-2xl border border-border",children:[e.jsxDEV("audio",{src:v,controls:!0},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:84,columnNumber:25},this),e.jsxDEV("p",{className:"text-foreground font-medium",children:s.filename},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:85,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:83,columnNumber:21},this),e.jsxDEV("div",{className:"absolute right-2 top-2 flex gap-2",children:[s.type==="IMAGE"&&i&&e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:l=>{l.stopPropagation(),i(v,s.filename,s.url||void 0)},className:"h-8 w-8 hover:bg-primary hover:text-primary-foreground",title:"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –ø—Ä–æ–º–ø—Ç—É",children:e.jsxDEV(be,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:104,columnNumber:29},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:93,columnNumber:25},this),n&&e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:l=>{l.stopPropagation(),n(s.requestId)},className:"h-8 w-8 text-muted-foreground hover:text-primary",title:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å",children:e.jsxDEV(ae,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:119,columnNumber:29},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:109,columnNumber:25},this),e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:l=>{l.stopPropagation(),u()},className:"h-8 w-8 hover:bg-secondary/80",title:"–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª",children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:132,columnNumber:25},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:122,columnNumber:21},this),s.type==="IMAGE"&&b&&e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:l=>{l.stopPropagation(),b()},className:`h-8 w-8 ${N?"text-primary hover:text-primary/80":""}`,title:N?"–û—Ç–∫—Ä–µ–ø–∏—Ç—å":"–ó–∞–∫—Ä–µ–ø–∏—Ç—å",children:e.jsxDEV(we,{className:`h-4 w-4 ${N?"fill-current":""}`},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:150,columnNumber:29},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:136,columnNumber:25},this),e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:l=>{l.stopPropagation(),a()},className:"h-8 w-8",title:"–ó–∞–∫—Ä—ã—Ç—å",children:e.jsxDEV(se,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:167,columnNumber:25},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:157,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:90,columnNumber:17},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-linear-to-t from-black/80 to-transparent p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between text-white",children:[e.jsxDEV("span",{className:"font-medium",children:s.filename},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:174,columnNumber:25},this),s.size&&e.jsxDEV("span",{className:"text-sm text-slate-300",children:De(s.size)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:176,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:173,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:172,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:59,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-fullscreen-view.tsx",lineNumber:55,columnNumber:9},this)}function ne({file:s,onClick:a,onAttachFile:i,onRepeatRequest:n,onDeleteFile:N,onTogglePin:b,isDeleting:v,attachingFile:u,onLoadingEffect:l,isPinned:w,isVideo:f}){function g(c){if(c.stopPropagation(),!i)return;const D=s.path?z(s.path):s.url;if(!D){console.warn("[MediaGallery] –ù–µ—Ç file.path –∏ file.url"),alert("–û—à–∏–±–∫–∞: —É —Ñ–∞–π–ª–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—É—Ç—å –∏–ª–∏ URL. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª.");return}l(),i(D,s.filename,s.type==="IMAGE"&&s.url||void 0)}return e.jsxDEV("div",{className:"group relative cursor-pointer transition-transform hover:scale-105",onClick:c=>{c.stopPropagation(),a(s)},role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),a(s))},children:[e.jsxDEV("div",{onClick:c=>c.stopPropagation(),children:e.jsxDEV(ye,{file:s,className:"h-full w-full"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:85,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:84,columnNumber:13},this),i&&e.jsxDEV(k,{size:"icon",variant:"ghost",className:"absolute left-1 top-1 h-6 w-6 text-slate-400 opacity-0 transition-opacity hover:text-cyan-400 hover:bg-cyan-600/20 group-hover:opacity-100",onClick:g,title:"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –ø—Ä–æ–º–ø—Ç—É",children:u?e.jsxDEV(G,{className:"h-3.5 w-3.5 animate-spin"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:101,columnNumber:25},this):e.jsxDEV(be,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:103,columnNumber:25},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:93,columnNumber:17},this),n&&e.jsxDEV(k,{size:"icon",variant:"ghost",className:"absolute left-8 top-1 h-6 w-6 text-slate-400 opacity-0 transition-opacity hover:text-cyan-400 hover:bg-cyan-600/20 focus:text-cyan-400 focus:bg-cyan-600/20 group-hover:opacity-100",onClick:c=>{c.stopPropagation(),n(s.requestId)},title:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å",children:e.jsxDEV(ae,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:120,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:110,columnNumber:17},this),f&&e.jsxDEV(k,{size:"icon",variant:"ghost",className:"absolute left-1 top-8 h-6 w-6 text-slate-400 opacity-0 transition-opacity hover:text-blue-400 hover:bg-blue-600/20 group-hover:opacity-100",onClick:c=>{c.stopPropagation(),a(s)},title:"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤–∏–¥–µ–æ",children:e.jsxDEV(fe,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:136,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:126,columnNumber:17},this),b&&e.jsxDEV(k,{size:"icon",variant:"ghost",className:`absolute right-7 top-1 h-6 w-6 opacity-0 transition-opacity group-hover:opacity-100 ${w?"text-yellow-400 hover:text-yellow-300 hover:bg-yellow-600/20":"text-slate-400 hover:text-yellow-400 hover:bg-yellow-600/20"}`,onClick:c=>{c.stopPropagation(),b(s.id)},title:w?"–û—Ç–∫—Ä–µ–ø–∏—Ç—å":"–ó–∞–∫—Ä–µ–ø–∏—Ç—å",children:e.jsxDEV(we,{className:`h-3.5 w-3.5 ${w?"fill-current":""}`},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:156,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:142,columnNumber:17},this),e.jsxDEV(k,{size:"icon",variant:"ghost",className:"absolute right-1 top-1 h-6 w-6 text-slate-400 opacity-0 transition-opacity hover:text-red-400 hover:bg-red-600/20 group-hover:opacity-100",onClick:c=>N(c,s.id),disabled:v,title:"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª",children:e.jsxDEV(ee,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:169,columnNumber:17},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:161,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/gallery-file-card.tsx",lineNumber:69,columnNumber:9},this)}function Ns(s,a){if(s.status==="FAILED")return 0;if(typeof s.costUsd=="number"&&!Number.isNaN(s.costUsd))return s.costUsd;if(a&&s.model){const i=a[s.model];if(i&&typeof i.usd=="number")return i.usd}return 0}function bs(s,a){return s.reduce((i,n)=>i+Ns(n,a),0)}function hs(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(s)}const fs=12;function ws({chatId:s,onAttachFile:a,onRepeatRequest:i}){const[n,N]=t.useState(null),[b,{isLoading:v}]=ce(),[u,l]=t.useState(1),[w,f]=t.useState([]),g=t.useRef(null),[c,D]=t.useState(!0),[y,J]=t.useState(!0),[C,M]=t.useState(!0),[h,P]=t.useState(!1),[T,V]=t.useState(new Set),r=t.useMemo(()=>ge(P),[]);t.useEffect(()=>{if(s===void 0)return;const d=`pinned-images-chat-${s}`,o=localStorage.getItem(d);if(o)try{const m=JSON.parse(o),x=new Set(m);V(x)}catch(m){console.error("Error loading pinned images:",m)}else V(new Set)},[s]),t.useEffect(()=>{l(1),f([])},[s]);const{data:p,isLoading:E,isFetching:U}=Ve({page:u,limit:50,chatId:s},{skip:s===void 0}),{data:S}=ve({id:s,limit:1e3},{skip:s===void 0}),{data:L}=je(),B=t.useMemo(()=>S?.requests?bs(S.requests,L):0,[S?.requests,L]);t.useEffect(()=>{p?.data&&f(u===1?d=>{const o=new Set(p.data.map(I=>I.id)),m=T;return[...d.filter(I=>m.has(I.id)&&!o.has(I.id)),...p.data]}:d=>{new Set(p.data.map(j=>j.id));const o=new Set(d.map(j=>j.id)),m=p.data.filter(j=>!o.has(j.id)),x=new Map(p.data.map(j=>[j.id,j]));return[...d.map(j=>x.get(j.id)||j),...m]})},[p,u]),t.useEffect(()=>{!S?.requests||T.size===0||f(d=>{const o=new Set(d.map(I=>I.id)),m=T,x=[];return S.requests.forEach(I=>{I.files.forEach(j=>{m.has(j.id)&&!o.has(j.id)&&x.push(j)})}),x.length===0?d:[...x,...d]})},[S,T]);function $(d){V(o=>{const m=new Set(o);if(m.has(d)?m.delete(d):m.add(d),s!==void 0){const x=`pinned-images-chat-${s}`;localStorage.setItem(x,JSON.stringify(Array.from(m)))}return m})}const{videoFiles:H,pinnedImages:W,unpinnedImages:R}=t.useMemo(()=>{const d=[],o=[],m=[];return w.forEach(x=>{x.type==="VIDEO"?d.push(x):x.type==="IMAGE"&&(T.has(x.id)?o.push(x):m.push(x))}),{videoFiles:d,pinnedImages:o,unpinnedImages:m}},[w,T]);t.useEffect(()=>{if(!g.current||U||!(p?.pagination&&p.pagination.page<p.pagination.totalPages))return;const o=new IntersectionObserver(m=>{m[0].isIntersecting&&l(x=>x+1)},{threshold:.1});return o.observe(g.current),()=>{o.disconnect()}},[U,p]);function O(d){N(d)}async function K(d,o){d.stopPropagation(),f(m=>m.filter(x=>x.id!==o));try{await b(o).unwrap()}catch(m){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞:",m)}}return E?e.jsxDEV("div",{className:"flex h-full w-[30%] flex-col border-l border-border bg-background",children:[e.jsxDEV("div",{className:q,children:e.jsxDEV("h2",{className:oe,children:"–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:306,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:305,columnNumber:17},this),e.jsxDEV(le,{className:"flex-1",children:e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 p-4",children:Array.from({length:fs}).map((d,o)=>e.jsxDEV(Q,{className:"aspect-square w-full rounded-xl"},`skeleton-${o}`,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:312,columnNumber:33},this))},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:309,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:308,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:304,columnNumber:13},this):w.length===0?e.jsxDEV("div",{className:"flex h-full w-[30%] flex-col border-l border-border bg-background",children:[e.jsxDEV("div",{className:q,children:e.jsxDEV("h2",{className:oe,children:"–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:328,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:327,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-1 items-center justify-center",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"–ù–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:331,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:330,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:326,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex h-full w-[30%] flex-col border-l border-border bg-background",children:[e.jsxDEV("div",{className:Z(q,"flex-row items-center justify-between bg-background"),children:[e.jsxDEV("h2",{className:oe,children:["–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã (",w.length,")"]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:347,columnNumber:21},this),B>0&&e.jsxDEV("div",{className:"text-[10px] font-medium px-2 py-0.5 rounded bg-primary/10 text-primary border border-primary/20",children:hs(B)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:351,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:341,columnNumber:17},this),e.jsxDEV(le,{className:"flex-1",children:e.jsxDEV("div",{className:"p-4 space-y-4",children:[W.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("button",{onClick:()=>M(!C),className:"flex w-full items-center justify-between rounded-lg bg-transparent px-3 py-2 text-sm font-medium text-foreground hover:bg-secondary transition-colors",children:[e.jsxDEV("div",{className:"flex gap-2 items-center",children:[e.jsxDEV(we,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:370,columnNumber:41},this),e.jsxDEV("span",{children:["–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ (",W.length,")"]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:371,columnNumber:41},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:369,columnNumber:37},this),e.jsxDEV(re,{className:`h-4 w-4 transition-transform ${C?"rotate-180":""}`},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:375,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:363,columnNumber:33},this),C&&e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 mt-2",children:W.map(d=>e.jsxDEV(ne,{file:d,onClick:O,onAttachFile:a,onRepeatRequest:i,onDeleteFile:K,onTogglePin:$,isDeleting:v,attachingFile:h,onLoadingEffect:r,isPinned:!0},d.id,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:384,columnNumber:45},this))},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:382,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:362,columnNumber:29},this),R.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("button",{onClick:()=>J(!y),className:"flex w-full items-center justify-between rounded-lg bg-slate-700/0 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-700 transition-colors",children:[e.jsxDEV("div",{className:"flex gap-2 items-center",children:[e.jsxDEV(he,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:413,columnNumber:41},this),e.jsxDEV("span",{children:["–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (",R.length,")"]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:414,columnNumber:41},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:412,columnNumber:37},this),e.jsxDEV(re,{className:`h-4 w-4 transition-transform ${y?"rotate-180":""}`},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:419,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:406,columnNumber:33},this),y&&e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 mt-2",children:R.map(d=>e.jsxDEV(ne,{file:d,onClick:O,onAttachFile:a,onRepeatRequest:i,onDeleteFile:K,onTogglePin:$,isDeleting:v,attachingFile:h,onLoadingEffect:r,isPinned:!1},d.id,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:428,columnNumber:45},this))},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:426,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:405,columnNumber:29},this),H.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("button",{onClick:()=>D(!c),className:"flex w-full items-center justify-between rounded-lg bg-slate-700/0 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-700 transition-colors",children:[e.jsxDEV("div",{className:"flex gap-2 items-center",children:[e.jsxDEV(_,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:457,columnNumber:41},this),e.jsxDEV("span",{children:["–í–∏–¥–µ–æ (",H.length,")"]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:458,columnNumber:41},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:456,columnNumber:37},this),e.jsxDEV(re,{className:`h-4 w-4 transition-transform ${c?"rotate-180":""}`},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:461,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:450,columnNumber:33},this),c&&e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 mt-2",children:H.map(d=>e.jsxDEV(ne,{file:d,onClick:O,onAttachFile:a,onRepeatRequest:i,onDeleteFile:K,isDeleting:v,attachingFile:h,onLoadingEffect:r,isVideo:!0},d.id,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:470,columnNumber:45},this))},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:468,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:449,columnNumber:29},this),p?.pagination&&p.pagination.page<p.pagination.totalPages&&e.jsxDEV("div",{ref:g,className:"flex h-20 items-center justify-center",children:U?e.jsxDEV("div",{className:"text-xs text-slate-400",children:"–ó–∞–≥—Ä—É–∑–∫–∞..."},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:497,columnNumber:41},this):e.jsxDEV("div",{className:"h-1 w-1 rounded-full bg-slate-600"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:501,columnNumber:41},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:492,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:359,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:358,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:339,columnNumber:13},this),n&&e.jsxDEV(e.Fragment,{children:[n.type==="VIDEO"&&e.jsxDEV(ue,{open:!!n,onOpenChange:d=>!d&&N(null),children:e.jsxDEV(pe,{showCloseButton:!1,className:"max-h-[95vh] max-w-[95vw] overflow-hidden border-border bg-background p-0",children:[e.jsxDEV(Ne,{className:"sr-only",children:["–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ: ",n.filename]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:524,columnNumber:33},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("video",{src:A(n)||"",controls:!0,autoPlay:!0,className:"max-h-[90vh] w-full"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:528,columnNumber:37},this),e.jsxDEV("div",{className:"absolute right-2 top-2 flex gap-2",children:[i&&e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:d=>{d.stopPropagation(),i(n.requestId)},className:"h-9 w-9 text-slate-400 hover:text-cyan-400 focus:text-cyan-400",title:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å",children:e.jsxDEV(ae,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:548,columnNumber:49},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:536,columnNumber:45},this),e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:()=>{const d=A(n);if(!d){console.warn("[MediaGallery] –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª: –Ω–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL",n);return}ie(d,n.filename)},title:"–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª",children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:564,columnNumber:45},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:551,columnNumber:41},this),e.jsxDEV(k,{size:"icon",variant:"secondary",onClick:()=>N(null),children:e.jsxDEV(se,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:573,columnNumber:45},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:566,columnNumber:41},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:534,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:527,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:520,columnNumber:29},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:514,columnNumber:25},this),n.type!=="VIDEO"&&e.jsxDEV(ps,{file:n,onClose:()=>N(null),onAttachFile:a,onRepeatRequest:i,isPinned:T.has(n.id),onTogglePin:()=>$(n.id)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:582,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:511,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/components/media/media-gallery.tsx",lineNumber:338,columnNumber:9},this)}function Is(){const{chatId:s}=Te.useParams(),a=parseInt(s),{data:i,isLoading:n,isFetching:N,error:b,refetch:v}=ve({id:a,limit:10},{refetchOnMountOrArgChange:!0,skip:!1});t.useEffect(()=>{console.log("[Chat] –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏:",{chatId:a,isChatLoading:n,isChatFetching:N,hasChat:!!i,requestsCount:i?.requests?.length||0,error:b})},[a,n,N,i,b]);const[u]=Ue(),[l]=Je(),[w]=Ce();$e();const[f,g]=t.useState("NANO_BANANA_PRO_KIEAI"),[c,D]=t.useState(null),y=t.useRef(null),J=t.useRef(!0);t.useRef(a);const[C,M]=t.useState(!1),h=t.useRef(null),{data:P}=de();t.useEffect(()=>{const o=i;if(o&&J.current){g(o.model),J.current=!1;return}},[i]);async function T(o){if(o===f)return;const m=f;g(o);const x=i;if(x)try{await u({id:x.id,model:o}).unwrap()}catch(I){g(m);const j=I&&typeof I=="object"&&"data"in I&&I.data&&typeof I.data=="object"&&"error"in I.data&&typeof I.data.error=="string"?I.data.error:"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.";alert(`–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏: ${j}`),console.error("[Chat] –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏:",I)}}function V(o){const m={id:`pending-${Date.now()}`,prompt:o,model:f,createdAt:new Date().toISOString(),status:"PENDING"};D(m),console.log("[Chat] ‚è≥ –î–æ–±–∞–≤–ª–µ–Ω–æ pending-—Å–æ–æ–±—â–µ–Ω–∏–µ:",m.id)}function r(o){D(m=>m?(console.log("[Chat] ‚ùå Pending-—Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ FAILED"),{...m,status:"FAILED",errorMessage:o}):null)}function p(o){console.log("[Chat] ‚úÖ –ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω, SSE –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç UI:",{requestId:o}),D(m=>m?{...m,requestId:o}:null),v().catch(m=>{console.error("[Chat] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —á–∞—Ç–∞:",m)})}const E=t.useMemo(()=>i?.requests||[],[i?.requests]);if(t.useEffect(()=>{if(!c?.requestId)return;E.some(m=>m.id===c.requestId)&&(console.log("[Chat] üîÑ –ó–∞–ø—Ä–æ—Å –Ω–∞–π–¥–µ–Ω, —É–±–∏—Ä–∞–µ–º pending-—Å–æ–æ–±—â–µ–Ω–∏–µ"),D(null))},[E,c]),n&&!i)return e.jsxDEV("div",{className:"flex h-screen bg-background",children:[e.jsxDEV(Y,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:189,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-1 items-center justify-center",children:e.jsxDEV(G,{className:"h-8 w-8 animate-spin text-primary"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:191,columnNumber:21},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:190,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:188,columnNumber:12},this);if(b&&!i)return e.jsxDEV("div",{className:"flex h-screen bg-background",children:[e.jsxDEV(Y,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:199,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-1 flex-col items-center justify-center text-center",children:[e.jsxDEV("p",{className:"text-xl text-destructive",children:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–∞"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:201,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-2",children:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–∞—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º."},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:204,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:200,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:198,columnNumber:12},this);if(!i&&!n&&!b)return e.jsxDEV("div",{className:"flex h-screen bg-background",children:[e.jsxDEV(Y,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:215,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-1 flex-col items-center justify-center text-center",children:[e.jsxDEV("p",{className:"text-xl text-muted-foreground",children:"–ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:217,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:220,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:216,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:214,columnNumber:12},this);if(!i)return null;const U=i,S=[...U.requests||[]].sort((o,m)=>new Date(o.createdAt).getTime()-new Date(m.createdAt).getTime()),$=c&&!S.some(o=>c.requestId?o.id===c.requestId:!1)&&c?{id:-1,chatId:a,prompt:c.prompt,model:c.model,status:c.status,inputFiles:[],errorMessage:c.errorMessage||null,createdAt:c.createdAt,completedAt:null,seed:null,files:[]}:null,H=$?[...S,$]:S;function W(o){y.current?.setPrompt(o)}async function R(o,m,x){try{await y.current?.addFileFromUrl(o,m,x)}catch(I){console.error("[Chat] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞:",I);const j=I instanceof Error?I.message:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞";alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞: ${j}`)}}async function O(o,m){const x=m||o.model;if(x&&x!==f&&T(x),y.current){await y.current.setRequestData(o);const I=document.getElementById("chat-input");I&&I.scrollIntoView({behavior:"smooth"})}}async function K(o){try{const m=await w(o).unwrap();m&&await O(m)}catch(m){console.error("[Chat] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞:",m),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è")}}const d=N&&!n;return e.jsxDEV("div",{className:"flex h-[calc(100vh-3.5rem)] bg-background",children:[e.jsxDEV(Y,{},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:322,columnNumber:13},this),e.jsxDEV("div",{className:"relative flex flex-1 flex-col",children:[e.jsxDEV(xs,{name:U.name,model:f,showUpdating:d},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:327,columnNumber:17},this),e.jsxDEV(us,{requests:H,chatModel:f,onEditPrompt:W,onAttachFile:R,onRepeatRequest:O,onScrollStateChange:M,onScrollToBottomRef:o=>{h.current=o}},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:330,columnNumber:17},this),e.jsxDEV(Ae,{ref:y,chatId:a,currentModel:f,onModelChange:T,onRequestCreated:p,onPendingMessage:V,onSendError:r,scrollToBottom:()=>h.current?.(),showScrollButton:C},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:335,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:325,columnNumber:13},this),e.jsxDEV(ws,{chatId:a,onAttachFile:R,onRepeatRequest:K},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:339,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:320,columnNumber:10},this)}function xs({name:s,model:a,showUpdating:i}){const{data:n}=de(),N=n?.find(b=>b.key===a);return e.jsxDEV("div",{className:Z(q,"bg-background"),children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-2xl",children:ze(a)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:358,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("h1",{className:"font-semibold text-foreground",children:s},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:361,columnNumber:25},this),i&&e.jsxDEV(G,{className:"h-4 w-4 animate-spin text-muted-foreground"},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:364,columnNumber:42},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:360,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:N?.name||a},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:366,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:359,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:357,columnNumber:13},this)},void 0,!1,{fileName:"/Users/wowbae/Desktop/IT/JS/–ü—Ä–æ–µ–∫—Ç—ã/ai-media-api/src/routes/media/$chatId.tsx?tsr-split=component",lineNumber:356,columnNumber:10},this)}export{Is as component};
